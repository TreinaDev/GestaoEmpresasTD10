<h1>Visualização da empresa <%= @company.brand_name %></h1>
<% if admin? %>
  <h4>Cadastrar email</h4>
  <% if @manager.errors.any? %>
    <h2>Verifique os erros abaixo:</h2>
    <ul>
      <% @manager.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  <% end %>
  <div class="row">
    <div class="col-sm-12 col-md-5">
      <%= form_with model:@manager, url:managers_path do |f| %>
        <%= f.hidden_field :company_id, :value => @company.id%>
        <%= f.label :email, class:'form-label' %>
        <div class="input-group mb-3">
          <%= f.text_field :email, placeholder: 'Cadastrar email', class:'form-control' %>
          <%= f.submit 'Cadastrar', class:'btn btn-success' %>
        </div>
      <% end %>
      <% if  @emails.present? %>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th scope="col">Email</th>
              <th scope="col">Ações</th>
            </tr>
            <thead>
              <tbody>
                <% @emails.each do |email| %>
                  <tr>
                    <td><%= email.email %></td>
                    <td class="d-flex justify-content-around">
                      <%= button_to manager_path(email.id), {method: :delete, id:"delete#{email.id}", form: { class: 'd-inline m-0' }, class:'btn btn-danger d-inline'} do %>
                        <i class="bi bi-trash"></i>
                      <% end %>
                      <button class="btn btn-primary d-inline">
                        <i class="bi bi-eye"></i>
                      </button>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          <% end %>
        </div>
        <div class="col-sm-12 col-md-7">
          <div class="card my-4">
            <% if @company.logo.present? %>
              <%= image_tag @company.logo, class: 'card-img-top rounded' %>
            <% end %>
            <div class="card-body">
              <h3 class="card-title"><%= @company.brand_name %></h2>
              <p class="card-text mb-1"><%= Company.human_attribute_name('corporate_name') %>: <%= @company.corporate_name %></p>
              <p class="card-text mb-1"> <%= Company.human_attribute_name('registration_number') %>: <%= @company.registration_number %></p>
              <p class="card-text mb-1"><%= Company.human_attribute_name('address') %>: <%= @company.address %></p>
              <p class="card-text mb-1"><%= Company.human_attribute_name('phone_number') %>: <%= @company.phone_number %></p>
              <p class="card-text mb-1"><%= Company.human_attribute_name('email') %>: <%= @company.email %></p>
              <p class="card-text mb-1"><%= Company.human_attribute_name('domain') %>: <%= @company.domain %></p>
              <p class="card-text mb-1"><%= Company.human_attribute_name('active') %>:
                <% if @company.active %>
                  Ativo
                <% else %>
                  Inativo
                <% end %>
              </p>
            </div>
            <div class="card-footer">
              <% if admin? %>
                <%= button_to "Desativar", deactivate_company_path(@company), method: :put, form: { class: 'd-inline m-1' }, class: 'btn btn-danger' if @company.active %>
                <%= button_to "Ativar", activate_company_path(@company), method: :put, form: { class: 'd-inline m-1' }, class: 'btn btn-primary' if !@company.active %>
                <%= link_to 'Editar', edit_company_path(@company), class: 'btn btn-primary' %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
